## 의존관계 자동 주입

### 의존관계 주입 방법

- 생성자주입
- 수정자 주입 (setter)
- 필드 주입
- 일반 메서드 주입

### 생성자 주입의 특징

- 생성자 호출 시점에 한번만 호출되는 것을 보장
- 불변, 필수 의존관계에서 사용됨
- 개발시 적절한 제약을 해두는 것을 권장!
- 불변의 상황에서는 setter 를 지양하자
- 생성자에서는 왠만해서는 값을 다 채워줄것을 권장
- 생성자가 1개일 경우에는 @Autowired 를 생략할 수 있음


### 수정자 주입의 특징

- setter 를 통해 주입
- 각 setter 는 @Autowired 를 설정해야함.
- 선택, 변경 가능성 의존관계에서 사용됨
- @Autowired 의 기본 동작은 주입할 대상이 없으면 오류를 발생함.
 - 주입 대상이 없어도 동작하려면 @Autowired(required = false) 지정이 필요.

### 자바 빈 프로퍼티

- setter (setXxxxx) 와 getter(getXxxx) 로 프로퍼티에 접근하는 규약

### 필드 주입

- 필드에 직접 @Autowired 을 사용하여 주입
- 안티패턴으로 추천하지않음
- 외부에서 변경이 불가능하여 테스트가 어려움

### 일반 메서드 주입

- 한번에 여러 필드를 주입 받을 수 있음
- 사용할 일 거의 없음

### 참고사항

- 의존관계 자동주입은 스프링 컨테이너가 관리하는 스프링 빈이어야 동작함

### 옵션처리

- @Autowired(require = false) : 자동 주입할 대상이 없으면 메서드 자체가 호출 안됨
- @Nullable 을 선언시 자동주입 대상이 없으면 null 반환
- Optional<> 을 선언시 자동주입 대상이 없으면 Optional.empty 반환

### 참고사항

- @Nullable, Optional 은 스프링 전반에 걸쳐서 지원됨

### 생성자 주입 권장

- 프레임워크에 의존하지 않고 순수한 자바 언어의 특징을 살리는 방법
- final 키워드를 통해 컴파일 시점에 오류를 빠르게 캐치 가능

### 롬복과 최신 트랜드

### Lombok

- @Getter, @Setter, @ToString 어노테이션을 통한 getter,setter,ToString 를 제공
- @RequiredArgsConstructor
    - final 필드 존재시 해당 필드값을 파라미터로 받는 생성자를 만들어줌(코드로 직접 안써도)
- 롬복이 자바의 애노테이션 프로세서라는 기능을 이용하여 컴파일 시점에 자동으로 생성해줌
- 최근에는 생성자를 1개만 두고 @Autowired 를 생략. 롬복을 통해 코드를 깔끔하게


### 조회 하는 빈의 중복

- Autowired 는 타입으로 조회
- 같은 타입의 경우는?
- 하위 타입으로 지정할 수 있으나 이것은 DIP 위배

### 조회 대상 빈이 2개 이상일 떄 해결방밥

- 필드명, 파라미터명으로 추가 매칭
- 정리하자면,
  1. 타입매칭
  2. 타입매칭의 결과가 2개 이상일 때 필드명, 파라미터 명으로 매칭

- @Qualifier 어노테이션으로 추가 구분자를 지정 가능 
- 생성자, 수정자, 필드, 빈 직접 등록 등 에서도 사용가능
- Qualifier 지정이름을 못찾을 시 해당 이름의 스프링 빈을 추가로 찾음
- 용도를 명확하게 사용하는 것이 좋음

- @Primary
  - 우선순위를 지정하는 방법

- @Primary 와 @Qualifier 간의 우선순위는 @Qualifier 가 더 높음

### 어노테이션 직접 생성

- 다양한 상황에서 직접 생성하여 사용가능
- 목적이 분명할 때 사용

### List, Map 을 통한 빈 조회 


### 빈 자동 등록, 수동 등록

- 